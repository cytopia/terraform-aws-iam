# Groups, Users and Policies

This example creates policies, groups and users.


## Usage

To run this example you need to execute:

```bash
$ terraform init
$ terraform plan
$ terraform apply
```

Note that this example may create resources which cost money. Run terraform destroy when you don't need these resources.


<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

No requirements.

## Providers

No providers.

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_aws_iam"></a> [aws\_iam](#module\_aws\_iam) | ../.. | n/a |

## Resources

No resources.

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_account_alias"></a> [account\_alias](#input\_account\_alias) | Assign the account alias for the AWS Account. Unmanaged by default. Resource will be created if the string is non-empty. | `string` | `""` | no |
| <a name="input_account_pass_policy"></a> [account\_pass\_policy](#input\_account\_pass\_policy) | Manages Password Policy for the AWS Account. Unmanaged by default. Resource will be created if 'manage' is set to true. | <pre>object({<br>    manage                         = optional(bool, false) # Set to true, to manage the AWS account password policy<br>    allow_users_to_change_password = optional(bool)        # Allow users to change their own password?<br>    hard_expiry                    = optional(bool)        # Users are prevented from setting a new password after their password has expired?<br>    max_password_age               = optional(number)      # Number of days that an user password is valid<br>    minimum_password_length        = optional(number)      # Minimum length to require for user passwords<br>    password_reuse_prevention      = optional(number)      # The number of previous passwords that users are prevented from reusing<br>    require_lowercase_characters   = optional(bool)        # Require lowercase characters for user passwords?<br>    require_numbers                = optional(bool)        # Require numbers for user passwords?<br>    require_symbols                = optional(bool)        # Require symbols for user passwords?<br>    require_uppercase_characters   = optional(bool)        # Require uppercase characters for user passwords?<br>  })</pre> | `{}` | no |
| <a name="input_providers_saml"></a> [providers\_saml](#input\_providers\_saml) | A list of dictionaries defining saml providers. | <pre>list(object({<br>    name = string # The name of the provider to create<br>    file = string # Path to XML generated by identity provider that supports SAML 2.0<br>  }))</pre> | `[]` | no |
| <a name="input_providers_oidc"></a> [providers\_oidc](#input\_providers\_oidc) | A list of dictionaries defining openid connect providers. | <pre>list(object({<br>    url             = string       # URL of the identity provider. Corresponds to the iss claim<br>    client_id_list  = list(string) # List of client IDs (also known as audiences)<br>    thumbprint_list = list(string) # List of server certificate thumbprints.<br>  }))</pre> | `[]` | no |
| <a name="input_policies"></a> [policies](#input\_policies) | A list of dictionaries defining all policies. | <pre>list(object({<br>    name = string                    # Name of the policy<br>    path = optional(string)          # Defaults to 'var.policy_path' if variable is set to null<br>    desc = optional(string)          # Defaults to 'var.policy_desc' if variable is set to null<br>    file = string                    # Path to json or json.tmpl file of policy<br>    vars = optional(map(string), {}) # Policy template variables {key = val, ...}<br>  }))</pre> | `[]` | no |
| <a name="input_groups"></a> [groups](#input\_groups) | A list of dictionaries defining all groups. | <pre>list(object({<br>    name        = string                     # Name of the group<br>    path        = optional(string)           # Defaults to 'var.group_path' if variable is set to null<br>    policies    = optional(list(string), []) # List of names of policies (must be defined in var.policies)<br>    policy_arns = optional(list(string), []) # List of existing policy ARN's<br>    inline_policies = optional(list(object({<br>      name = string                    # Name of the inline policy<br>      file = string                    # Path to json or json.tmpl file of policy<br>      vars = optional(map(string), {}) # Policy template variables {key = val, ...}<br>    })), [])<br>  }))</pre> | `[]` | no |
| <a name="input_users"></a> [users](#input\_users) | A list of dictionaries defining all users. | <pre>list(object({<br>    name   = string                     # Name of the user<br>    path   = optional(string)           # Defaults to 'var.user_path' if variable is set to null<br>    groups = optional(list(string), []) # List of group names to add this user to<br>    access_keys = optional(list(object({<br>      name    = string                     # IaC identifier for first or second IAM access key (not used on AWS)<br>      pgp_key = optional(string)           # Leave empty for non or provide a b64-enc pubkey or keybase username<br>      status  = optional(string, "Active") # 'Active' or 'Inactive'<br>    })), [])<br>    permissions_boundary = optional(string)           # ARN to a policy used as permissions boundary (or null/empty)<br>    policies             = optional(list(string), []) # List of names of policies (must be defined in var.policies)<br>    policy_arns          = optional(list(string), []) # List of existing policy ARN's<br>    inline_policies = optional(list(object({<br>      name = string                    # Name of the inline policy<br>      file = string                    # Path to json or json.tmpl file of policy<br>      vars = optional(map(string), {}) # Policy template variables {key = val, ...}<br>    })), [])<br>  }))</pre> | `[]` | no |
| <a name="input_roles"></a> [roles](#input\_roles) | A list of dictionaries defining all roles. | <pre>list(object({<br>    name                 = string                     # Name of the role<br>    instance_profile     = optional(string)           # Name of the instance profile<br>    path                 = optional(string)           # Defaults to 'var.role_path' if variable is set to null<br>    desc                 = optional(string)           # Defaults to 'var.role_desc' if variable is set to null<br>    trust_policy_file    = string                     # Path to file of trust/assume policy. Will be templated if vars are passed.<br>    trust_policy_vars    = optional(map(string), {})  # Policy template variables {key = val, ...}<br>    permissions_boundary = optional(string)           # ARN to a policy used as permissions boundary (or null/empty)<br>    policies             = optional(list(string), []) # List of names of policies (must be defined in var.policies)<br>    policy_arns          = optional(list(string), []) # List of existing policy ARN's<br>    inline_policies = optional(list(object({<br>      name = string                    # Name of the inline policy<br>      file = string                    # Path to json or json.tmpl file of policy<br>      vars = optional(map(string), {}) # Policy template variables {key = val, ...}<br>    })), [])<br>  }))</pre> | `[]` | no |
| <a name="input_policy_path"></a> [policy\_path](#input\_policy\_path) | The default path under which to create the policy if not specified in the policies list. You can use a single path, or nest multiple paths as if they were a folder structure. For example, you could use the nested path /division\_abc/subdivision\_xyz/product\_1234/engineering/ to match your company's organizational structure. | `string` | `"/"` | no |
| <a name="input_policy_desc"></a> [policy\_desc](#input\_policy\_desc) | The default description of the policy. | `string` | `"Managed by Terraform"` | no |
| <a name="input_group_path"></a> [group\_path](#input\_group\_path) | The path under which to create the group. You can use a single path, or nest multiple paths as if they were a folder structure. For example, you could use the nested path /division\_abc/subdivision\_xyz/product\_1234/engineering/ to match your company's organizational structure. | `string` | `"/"` | no |
| <a name="input_user_path"></a> [user\_path](#input\_user\_path) | The path under which to create the user. You can use a single path, or nest multiple paths as if they were a folder structure. For example, you could use the nested path /division\_abc/subdivision\_xyz/product\_1234/engineering/ to match your company's organizational structure. | `string` | `"/"` | no |
| <a name="input_role_path"></a> [role\_path](#input\_role\_path) | The path under which to create the role. You can use a single path, or nest multiple paths as if they were a folder structure. For example, you could use the nested path /division\_abc/subdivision\_xyz/product\_1234/engineering/ to match your company's organizational structure. | `string` | `"/"` | no |
| <a name="input_role_desc"></a> [role\_desc](#input\_role\_desc) | The description of the role. | `string` | `"Managed by Terraform"` | no |
| <a name="input_role_max_session_duration"></a> [role\_max\_session\_duration](#input\_role\_max\_session\_duration) | The maximum session duration (in seconds) that you want to set for the specified role. This setting can have a value from 1 hour to 12 hours specified in seconds. | `number` | `3600` | no |
| <a name="input_role_force_detach_policies"></a> [role\_force\_detach\_policies](#input\_role\_force\_detach\_policies) | Specifies to force detaching any policies the role has before destroying it. | `bool` | `true` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | Key-value mapping of tags for the IAM role or user. | `map(string)` | `{}` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_policies"></a> [policies](#output\_policies) | Created customer managed IAM policies |
| <a name="output_groups"></a> [groups](#output\_groups) | Created groups |
| <a name="output_users"></a> [users](#output\_users) | Created users |
| <a name="output_users_keys"></a> [users\_keys](#output\_users\_keys) | Created user's access keys |

<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
